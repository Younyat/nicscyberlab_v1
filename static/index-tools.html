<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestor de Herramientas por Instancia</title>
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="css/style-tools.css">
    <style>
        #cy { height: 600px; width: 100%; }
    </style>
</head>
<body class="bg-gray-900 text-white">
<div class="flex min-h-screen p-6 space-x-6">
    <!-- PANEL IZQUIERDO -->
    <div class="w-1/3 bg-gray-800 rounded-xl p-5">
        <h1 class="text-2xl font-bold mb-4">
            <i class="fas fa-server"></i> Instancias Disponibles
        </h1>
        <div id="instance-list" class="space-y-3"></div>
    </div>

    <!-- ESCENARIO -->
    <div class="flex-1 bg-gray-800 rounded-xl p-5">
        <h1 class="text-xl font-bold mb-3">
            <i class="fas fa-network-wired"></i> Escenario Actual
        </h1>
        <div id="cy" class="bg-gray-700 rounded-lg shadow-inner"></div>
    </div>

    <!-- PANEL DERECHO -->
    <div class="w-1/3 bg-gray-800 rounded-xl p-5">
        <h1 class="text-2xl font-bold mb-4 text-center">
            <i class="fas fa-tools"></i> Herramientas de Instancia
        </h1>

        <div id="selected-instance-info" class="p-4 bg-gray-700 rounded-lg mb-5 hidden">
            <h2 class="text-lg font-bold mb-2">Instancia seleccionada:</h2>
            <p class="text-blue-400" id="instance-name"></p>
            <p class="text-sm text-gray-400" id="instance-ip"></p>
        </div>

        <h2 class="text-lg font-bold mb-2">Herramientas Instaladas</h2>
        <div id="installed-tools" class="bg-gray-700 rounded-lg p-4 space-y-2 h-40 overflow-y-auto"></div>

        <h2 class="text-lg font-bold mt-6 mb-2">A침adir Herramienta</h2>
        <select id="available-tools" class="w-full bg-gray-900 border border-gray-700 p-2 rounded-lg text-white">
            <option value="">Selecciona herramienta...</option>
            <option value="wazuh">Wazuh</option>
            <option value="suricata">Suricata</option>
            <option value="snort">Snort</option>
            <option value="nmap">Nmap</option>
            <option value="caldera">MITRE Caldera</option>
            <option value="tcpdump">TCPDump</option>
            <option value="zeek">Zeek</option>
        </select>

        <button id="btn-add-tool" class="w-full mt-3 bg-green-600 hover:bg-green-500 py-2 rounded-lg font-bold">
            <i class="fas fa-plus"></i> A침adir Herramienta
        </button>

        <h2 class="text-lg font-bold mt-6 mb-2">Terminal</h2>
        <button id="btn-load-config" class="w-full mt-3 bg-blue-600 hover:bg-blue-500 py-2 rounded-lg font-bold">
           <i class="fas fa-cogs"></i> Leer configuraci칩n de herramientas
        </button>
        <button id="btn-install-tools" class="w-full mt-3 bg-green-600 hover:bg-green-500 py-2 rounded-lg font-bold">
            <i class="fas fa-play"></i> Ejecutar instalaci칩n de herramientas
        </button>

        <div id="tools-terminal" class="bg-black rounded-lg p-3 h-40 overflow-y-auto font-mono text-sm"></div>
    </div>
</div>

<div id="toast" class="fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-3 rounded-lg shadow-lg opacity-0 pointer-events-none transition-opacity duration-300 z-50"></div>

<div id="ui-freeze" style="display: none;" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50">
  <div class="text-center">
    <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-400 mx-auto"></div>
    <p class="mt-4 text-lg font-bold text-white">Instalando herramientas...</p>
  </div>
</div>

<script type="module" src="js/controllers/tools_controller.js"></script>
</body>
</html>
